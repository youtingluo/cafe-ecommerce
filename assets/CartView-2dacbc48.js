import{_ as x,m as F,a as L,r as l,o,c as n,d,b as s,w as p,F as b,i as h,f as c,e as m,t as i,n as V,p as j,g as B}from"./index-dea600ad.js";import{L as M}from"./index-54b2cda4.js";import{P as N}from"./ProcessBar-82ea5207.js";import{c as g}from"./cart-94e17664.js";import{m as G}from"./thousands_separators-01acb187.js";import"./_commonjsHelpers-042e6b4d.js";import"./sweetalert2.all-6567ce3e.js";const S={data(){return{code:""}},mixins:[G],components:{Loading:M,ProcessBar:N},methods:{...F(g,["updateCart","getCarts","removeCart","removeAllCart","useCoupon"])},computed:{...L(g,["carts","isLoading","final_total","state","message","total"])},mounted(){this.getCarts()}},r=e=>(j("data-v-6440a653"),e=e(),B(),e),D=r(()=>s("div",{class:"position-relative"},[s("img",{class:"imgset",src:"https://storage.googleapis.com/vue-course-api.appspot.com/youting/1679368088772.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=gkPGxdJV09tlG7eTyLkc3UlmhEM8fwVRUM%2BGt885Sz2ZHBfJU132NUGaF0phyjiGlaFHaCl1Hi4btvrI5848F5v5eRFi5LjyN4wJbKpa9%2FzD8tMlwU13ZC4hN4EL5XpFGwLHSa9sDfPWh9UySEWyZvoXbM98yXi6RgGKGbPMTYr%2FWOJbm46bzCkgwyU3xCMmWkrhqzmaxeA1l900dRYxpeaHvcANukTdsBdyC0d4QBIDJusZohHbJE0E8tjAInbDsYx466vGO4Buyg4qD8irn78jjYeOaTzQiCOBgWOL0GZPjiUI6I1fO3cvObMiloDB1QhWYwViuR652egoDOuR6g%3D%3D"}),s("p",{class:"position-absolute top-50 start-50 p-2 bg-dark bg-opacity-50 translate-middle fs-1 text-white border-bottom border-4 border-light"}," 購物車 ")],-1)),I={key:0,class:"container my-3 min-body-heigh d-flex flex-column align-items-center justify-content-center"},T=r(()=>s("div",{class:"mb-5 text-center"},[s("h3",null,"您的購物車是空的"),s("i",{class:"bi bi-basket",style:{"font-size":"3rem"}})],-1)),U={key:1,class:"container my-3 my-md-5 min-body-heigh"},z={class:"row"},E={class:"col-md-8"},O=r(()=>s("h1",{class:"bg-secondary p-3 text-center"},"購物車清單",-1)),P=["src"],R={class:"d-flex flex-column align-items-start justify-content-between"},q={class:"h5 text-nowrap me-md-3"},A={class:"btn-group",role:"group","aria-label":"Basic example"},$=["disabled","onClick"],H=["value"],J=["disabled","onClick"],W={class:"d-flex flex-column justify-content-between align-items-end ms-auto"},Y=["disabled","onClick"],Z={key:0,class:"spinner-border spinner-border-sm"},Q={key:1,class:"bi bi-x-circle"},X={class:"text-end"},K={key:0,class:"fw-bold text-primary text-decoration-line-through"},ss={class:"mb-0 fw-bold"},es={key:1,class:"text-success"},ts={class:"row justify-content-between my-3"},os={class:"col-md-6"},ns=["disabled"],is={key:0,class:"spinner-border spinner-border-sm"},ds={class:"col-md-6"},as={class:"d-flex justify-content-end mt-3 mt-md-0"},ls=["disabled"],rs={key:0,class:"spinner-border spinner-border-sm"},cs={class:"col-md-4 mt-4 mt-md-0"},ms={class:"text-dark border border-dark p-3"},us=r(()=>s("h2",{class:"text-center border-bottom border-2 pb-3 mb-3"},"訂單明細",-1)),ps={class:"d-flex justify-content-between align-items-start mb-2"},bs=r(()=>s("p",{class:"fs-5"},"小計：",-1)),_s={class:"d-flex flex-column"},hs={class:"d-flex justify-content-between align-items-end mb-2"},gs=r(()=>s("p",{class:"fs-3"},"總計：",-1)),ys={class:"text-end"},fs={key:0,class:"fw-bold text-primary mb-0 text-decoration-line-through"},vs={class:"fw-bold text-danger"};function ks(e,a,Cs,ws,u,xs){const y=l("loading"),_=l("RouterLink"),f=l("ProcessBar"),v=l("VField"),k=l("ErrorMessage"),C=l("VForm");return o(),n(b,null,[d(y,{active:e.isLoading,loader:"dots",color:"#FCF8F3","background-color":"#676767"},null,8,["active"]),D,e.carts.length?(o(),n("div",U,[d(f),s("div",z,[s("div",E,[O,(o(!0),n(b,null,h(e.carts,t=>(o(),n("div",{class:"d-flex justify-content-between mt-2 mt-md-3 border p-2 p-md-3",key:t.id},[s("div",null,[s("img",{class:"d-none d-md-block me-md-3 cart-img bg-cover",src:t.product.imageUrl},null,8,P)]),s("div",R,[s("h3",q,i(t.product.title),1),s("span",null,"NT$ "+i(t.product.price),1),s("div",A,[s("button",{type:"button",class:"btn btn-primary",disabled:e.state===t.id,onClick:()=>e.updateCart(t,t.qty-1)}," - ",8,$),s("input",{type:"text",class:"text-center",value:t.qty,readonly:""},null,8,H),s("button",{type:"button",class:"btn btn-primary",disabled:e.state===t.id,onClick:()=>e.updateCart(t,t.qty+1)}," + ",8,J)])]),s("div",W,[s("button",{type:"button",class:"btn btn-outline-danger border-0",disabled:e.state===t.id,onClick:()=>e.removeCart(t.id)},[e.state===t.id?(o(),n("span",Z)):(o(),n("i",Q))],8,Y),s("div",X,[t.coupon?(o(),n("small",K," NT$ "+i(e.thousands(Math.round(t.total))),1)):c("",!0),s("p",ss,"NT$ "+i(e.thousands(Math.round(t.final_total))),1),t.coupon?(o(),n("small",es,i(e.message),1)):c("",!0)])])]))),128)),s("div",ts,[s("div",os,[d(C,{class:"input-group",onSubmit:a[1]||(a[1]=()=>e.useCoupon(u.code))},{default:p(({errors:t})=>[d(v,{name:"優惠券",type:"text",class:V(["form-control",{"is-invalid":t.優惠券}]),placeholder:"輸入優惠碼",modelValue:u.code,"onUpdate:modelValue":a[0]||(a[0]=w=>u.code=w),rules:"required"},null,8,["class","modelValue"]),s("button",{type:"submit",class:"btn btn-success",disabled:e.isLoading},[e.isLoading?(o(),n("span",is)):c("",!0),m(" 套用優惠券 ")],8,ns),d(k,{name:"優惠券",class:"invalid-feedback"})]),_:1})]),s("div",ds,[s("div",as,[s("button",{type:"button",class:"btn btn-outline-danger",disabled:e.isLoading,onClick:a[2]||(a[2]=()=>e.removeAllCart())},[e.isLoading?(o(),n("span",rs)):c("",!0),m(" 清除購物車 ")],8,ls)])])])]),s("div",cs,[s("div",ms,[us,s("div",ps,[bs,s("div",_s,[(o(!0),n(b,null,h(e.carts,t=>(o(),n("p",{class:"text-end border-bottom pb-3",key:t.id},i(t.product.title)+" x "+i(t.qty),1))),128))])]),s("div",hs,[gs,s("div",ys,[e.message?(o(),n("small",fs," NT$ "+i(e.thousands(Math.round(e.total))),1)):c("",!0),s("p",vs,"NT$ "+i(e.thousands(Math.round(e.final_total))),1)])])]),d(_,{to:`cart/${e.carts[0].id}`,class:"btn btn-dark btn-lg rounded-0 w-100"},{default:p(()=>[m("結帳 ")]),_:1},8,["to"])])])])):(o(),n("div",I,[T,s("div",null,[d(_,{class:"btn btn-primary d-inline-block",to:"/products"},{default:p(()=>[m("馬上去選購")]),_:1})])]))],64)}const Gs=x(S,[["render",ks],["__scopeId","data-v-6440a653"]]);export{Gs as default};
