import{S as d}from"./sweetalert2.all-6567ce3e.js";import{P as f}from"./ProcessBar-82ea5207.js";import{L as x}from"./index-54b2cda4.js";import{m as v}from"./thousands_separators-01acb187.js";import{_ as y,r as l,o as a,c as r,d as _,b as t,t as o,e as p,F as h,i as L}from"./index-dea600ad.js";import"./_commonjsHelpers-042e6b4d.js";const{VITE_URL:m,VITE_PATH:u}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"youting",BASE_URL:"/cafe-ecommerce/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={data(){return{isLoading:!1,products:{},user:{},create_at:0,is_paid:!1,total:!1}},mixins:[v],components:{Loading:x,ProcessBar:f},computed:{createTime(){return new Date(this.create_at*1e3).toLocaleString()}},methods:{getOrder(){const{id:i}=this.$route.params;this.isLoading=!0,this.$http(`${m}/v2/api/${u}/order/${i}`).then(s=>{this.products=s.data.order.products,this.user=s.data.order.user,this.create_at=s.data.order.create_at,this.is_paid=s.data.order.is_paid,this.total=s.data.order.total,this.isLoading=!1}).catch(s=>{this.isLoading=!1,d.fire({icon:"error",title:"請重試一次",text:s.response.data.message})})},sendOrder(){this.isLoading=!0;const{id:i}=this.$route.params;this.$http.post(`${m}/v2/api/${u}/pay/${i}`).then(()=>{this.isLoading=!1,this.getOrder(),d.fire({icon:"success",title:"付款成功!",text:"Cafe beat 感謝您的支持與喜愛！"}).then(()=>{this.$router.replace("/done")})}).catch(s=>{this.isLoading=!1,d.fire({icon:"error",title:"請重試一次",text:s.response.data.message})})}},mounted(){this.getOrder()}},w=t("div",{class:"position-relative"},[t("img",{class:"imgset",src:"https://storage.googleapis.com/vue-course-api.appspot.com/youting/1679368088772.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=gkPGxdJV09tlG7eTyLkc3UlmhEM8fwVRUM%2BGt885Sz2ZHBfJU132NUGaF0phyjiGlaFHaCl1Hi4btvrI5848F5v5eRFi5LjyN4wJbKpa9%2FzD8tMlwU13ZC4hN4EL5XpFGwLHSa9sDfPWh9UySEWyZvoXbM98yXi6RgGKGbPMTYr%2FWOJbm46bzCkgwyU3xCMmWkrhqzmaxeA1l900dRYxpeaHvcANukTdsBdyC0d4QBIDJusZohHbJE0E8tjAInbDsYx466vGO4Buyg4qD8irn78jjYeOaTzQiCOBgWOL0GZPjiUI6I1fO3cvObMiloDB1QhWYwViuR652egoDOuR6g%3D%3D"}),t("p",{class:"position-absolute top-50 start-50 p-2 bg-dark bg-opacity-50 translate-middle fs-1 text-white border-bottom border-4 border-light"}," 確認付款 ")],-1),D={class:"container my-3 min-body-heigh"},O={class:"row"},T={class:"col-md-6 mb-3 mb-md-0"},B={class:"text-dark border border-dark p-3"},E=t("h2",{class:"text-center border-bottom border-2 pb-3 mb-3"},"個人資料",-1),P={class:"mb-2"},F={class:"mb-2"},C={class:"mb-2"},G={class:"mb-2"},R={class:"col-md-6"},S={class:"text-dark border border-dark p-3"},U=t("h2",{class:"text-center border-bottom border-2 pb-3 mb-3"},"訂單明細",-1),V={class:"mb-3"},I={class:"text-info"},M={class:"d-flex justify-content-between align-items-start mb-2"},j=t("span",null,"品項：",-1),N={class:"d-flex flex-column"},H=t("br",null,null,-1),z={class:"text-muted"},A={class:"d-flex justify-content-between align-items-end mb-2"},J=t("p",null,"總計：",-1),W={class:"fw-bold text-danger"},Y={class:"d-flex justify-content-between align-items-end mb-2"},Z=t("p",null,"付款狀態：",-1),$={class:"fw-bold"},q={key:0,class:"text-success"},Q={key:1,class:"text-muted"},X=["disabled"];function K(i,s,tt,st,e,c){const b=l("loading"),g=l("ProcessBar");return a(),r(h,null,[_(b,{active:e.isLoading,loader:"dots",color:"#FCF8F3","background-color":"#676767"},null,8,["active"]),w,t("div",D,[_(g,{isPaid:e.is_paid},null,8,["isPaid"]),t("div",O,[t("div",T,[t("div",B,[E,t("ul",null,[t("li",P,"姓名："+o(e.user.name),1),t("li",F,"信箱："+o(e.user.email),1),t("li",C,"地址："+o(e.user.address),1),t("li",G,"電話："+o(e.user.tel),1),t("li",null,"留言："+o(e.user.message),1)])])]),t("div",R,[t("div",S,[U,t("p",V,[p(" 建立日期："),t("span",I,o(c.createTime),1)]),t("div",M,[j,t("div",N,[(a(!0),r(h,null,L(e.products,n=>(a(),r("p",{class:"text-end border-bottom pb-3",key:n.id},[p(o(n.product.title)+" x "+o(n.qty)+" ",1),H,t("small",z,"NT$ "+o(i.thousands(Math.round(n.final_total))),1)]))),128))])]),t("div",A,[J,t("p",W,"NT$ "+o(i.thousands(Math.round(e.total))),1)]),t("div",Y,[Z,t("p",$,[e.is_paid?(a(),r("span",q,"已付款")):(a(),r("span",Q,"未付款"))])])]),t("button",{type:"button",class:"btn btn-primary w-100 rounded-0",disabled:e.isLoading,onClick:s[0]||(s[0]=()=>c.sendOrder())}," 確認付款 ",8,X)])])])],64)}const dt=y(k,[["render",K]]);export{dt as default};
