import{G as c,H as i}from"./index-ea9b93d2.js";import{S as s}from"./sweetalert2.all-6567ce3e.js";const{VITE_URL:o,VITE_PATH:r}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"youting",BASE_URL:"/cafe-ecommerce/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},l=c("cart",{state:()=>({carts:[],final_total:0,total:0,isLoading:!1,state:"",message:""}),actions:{getCarts(){this.isLoading=!0,i.get(`${o}/v2/api/${r}/cart`).then(t=>{this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total,this.isLoading=!1}).catch(t=>{s.fire({icon:"error",title:"請重試一次",text:t.response.data.message}),this.isLoading=!1})},addToCart(t,a=1){this.state=t,this.isLoading=!0;const e={product_id:t,qty:a};i.post(`${o}/v2/api/${r}/cart`,{data:e}).then(()=>{this.getCarts(),this.state="",this.isLoading=!1,s.fire({position:"top",title:"已加入購物車",icon:"success",timer:2500,toast:!0,showConfirmButton:!1,timerProgressBar:!0})}).catch(n=>{this.state="",s.fire({icon:"error",title:"請重試一次",text:n.response.data.message})})},updateCart(t,a){this.state=t.product_id;const e={product_id:t.product_id,qty:a};i.put(`${o}/v2/api/${r}/cart/${t.id}`,{data:e}).then(()=>{this.getCarts(),this.state="",s.fire({position:"top",title:"已更新購物車",icon:"success",timer:1500,toast:!0,showConfirmButton:!1,showCloseButton:!0})}).catch(n=>{this.state="",s.fire({icon:"error",title:"請重試一次",text:n.response.data.message})})},removeCart(t){this.state=t,i.delete(`${o}/v2/api/${r}/cart/${t}`).then(()=>{this.state="",this.getCarts(),s.fire({position:"top",title:"已刪除產品",icon:"success",timer:1500,toast:!0,showConfirmButton:!1,showCloseButton:!0})}).catch(a=>{this.state="",s.fire({icon:"error",title:"請重試一次",text:a.response.data.message})})},removeAllCart(){this.isLoading=!0,i.delete(`${o}/v2/api/${r}/carts`).then(()=>{this.getCarts(),this.message="",this.isLoading=!1}).catch(t=>{this.state="",s.fire({icon:"error",title:"請重試一次",text:t.response.data.message})})},useCoupon(t){this.isLoading=!0;const a={code:t};i.post(`${o}/v2/api/${r}/coupon`,{data:a}).then(e=>{this.final_total=e.data.data.final_total,this.message=e.data.message,this.getCarts(),this.isLoading=!1})}}});export{l as c};
