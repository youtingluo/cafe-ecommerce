import{_ as x,m as F,a as V,r as l,o,c as n,d,b as e,w as u,F as p,i as h,f as c,e as b,t as i,n as L,p as j,g as B}from"./index-bc0b5784.js";import{L as M}from"./index-65bdde65.js";import{P as N}from"./ProcessBar-ca7fbbf0.js";import{c as g}from"./cart-bebbd8b4.js";import{m as G}from"./thousands_separators-01acb187.js";import"./_commonjsHelpers-042e6b4d.js";import"./sweetalert2.all-6567ce3e.js";const S={data(){return{code:""}},mixins:[G],components:{Loading:M,ProcessBar:N},methods:{...F(g,["updateCart","getCarts","removeCart","removeAllCart","useCoupon"])},computed:{...V(g,["carts","isLoading","final_total","state","message","total"])},mounted(){this.getCarts()}},r=t=>(j("data-v-3c203ee7"),t=t(),B(),t),D=r(()=>e("div",{class:"position-relative"},[e("img",{class:"imgset",src:"https://storage.googleapis.com/vue-course-api.appspot.com/youting/1679368088772.png?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=gkPGxdJV09tlG7eTyLkc3UlmhEM8fwVRUM%2BGt885Sz2ZHBfJU132NUGaF0phyjiGlaFHaCl1Hi4btvrI5848F5v5eRFi5LjyN4wJbKpa9%2FzD8tMlwU13ZC4hN4EL5XpFGwLHSa9sDfPWh9UySEWyZvoXbM98yXi6RgGKGbPMTYr%2FWOJbm46bzCkgwyU3xCMmWkrhqzmaxeA1l900dRYxpeaHvcANukTdsBdyC0d4QBIDJusZohHbJE0E8tjAInbDsYx466vGO4Buyg4qD8irn78jjYeOaTzQiCOBgWOL0GZPjiUI6I1fO3cvObMiloDB1QhWYwViuR652egoDOuR6g%3D%3D"}),e("p",{class:"position-absolute top-50 start-50 p-2 bg-dark bg-opacity-50 translate-middle fs-1 text-white border-bottom border-4 border-light"}," 購物車 ")],-1)),I={key:0,class:"container my-3 min-body-heigh d-flex flex-column align-items-center justify-content-center"},T=r(()=>e("div",{class:"mb-5 text-center"},[e("h3",null,"您的購物車是空的"),e("i",{class:"bi bi-basket",style:{"font-size":"3rem"}})],-1)),U={key:1,class:"container my-3 my-md-5 min-body-heigh"},z={class:"row"},E={class:"col-md-8"},q=r(()=>e("h1",{class:"bg-secondary p-3 text-center"},"購物車清單",-1)),O=["src"],P={class:"d-flex flex-column align-items-start justify-content-between"},R={class:"h5 text-nowrap me-md-3"},A={class:"btn-group",role:"group","aria-label":"Basic example"},$=["disabled","onClick"],H=["value"],J=["disabled","onClick"],W={class:"d-flex flex-column justify-content-between align-items-end ms-auto"},Y=["disabled","onClick"],Z={key:0,class:"spinner-border spinner-border-sm"},Q={key:1,class:"bi bi-x-circle"},X={class:"text-end"},K={key:0,class:"fw-bold text-primary text-decoration-line-through"},ee={class:"mb-0 fw-bold"},te={key:1,class:"text-success"},se={class:"row justify-content-between my-3"},oe={class:"col-md-6"},ne=["disabled"],ie={class:"col-md-6"},de={class:"d-flex justify-content-end mt-3 mt-md-0"},ae=["disabled"],le={key:0,class:"spinner-border spinner-border-sm"},re={class:"col-md-4 mt-4 mt-md-0"},ce={class:"text-dark border border-dark p-3"},me=r(()=>e("h2",{class:"text-center border-bottom border-2 pb-3 mb-3"},"訂單明細",-1)),ue={class:"d-flex justify-content-between align-items-start mb-2"},pe=r(()=>e("p",{class:"fs-5"},"小計：",-1)),be={class:"d-flex flex-column"},_e={class:"d-flex justify-content-between align-items-end mb-2"},he=r(()=>e("p",{class:"fs-3"},"總計：",-1)),ge={class:"text-end"},ye={key:0,class:"fw-bold text-primary mb-0 text-decoration-line-through"},fe={class:"fw-bold text-danger"};function ve(t,a,ke,Ce,m,we){const y=l("loading"),_=l("RouterLink"),f=l("ProcessBar"),v=l("VField"),k=l("ErrorMessage"),C=l("VForm");return o(),n(p,null,[d(y,{active:t.isLoading,loader:"dots",color:"#FCF8F3","background-color":"#676767"},null,8,["active"]),D,t.carts.length?(o(),n("div",U,[d(f),e("div",z,[e("div",E,[q,(o(!0),n(p,null,h(t.carts,s=>(o(),n("div",{class:"d-flex justify-content-between mt-2 mt-md-3 border p-2 p-md-3",key:s.id},[e("div",null,[e("img",{class:"d-none d-md-block me-md-3 cart-img bg-cover",src:s.product.imageUrl},null,8,O)]),e("div",P,[e("h3",R,i(s.product.title),1),e("span",null,"NT$ "+i(s.product.price),1),e("div",A,[e("button",{type:"button",class:"btn btn-primary",disabled:t.state===s.id,onClick:()=>t.updateCart(s,s.qty-1)}," - ",8,$),e("input",{type:"text",class:"text-center qty-input",value:s.qty,readonly:""},null,8,H),e("button",{type:"button",class:"btn btn-primary",disabled:t.state===s.id,onClick:()=>t.updateCart(s,s.qty+1)}," + ",8,J)])]),e("div",W,[e("button",{type:"button",class:"btn btn-outline-danger border-0",disabled:t.state===s.id,onClick:()=>t.removeCart(s.id)},[t.state===s.id?(o(),n("span",Z)):(o(),n("i",Q))],8,Y),e("div",X,[s.coupon?(o(),n("small",K," NT$ "+i(t.thousands(Math.round(s.total))),1)):c("",!0),e("p",ee,"NT$ "+i(t.thousands(Math.round(s.final_total))),1),s.coupon?(o(),n("small",te,i(t.message),1)):c("",!0)])])]))),128)),e("div",se,[e("div",oe,[d(C,{class:"input-group",onSubmit:a[1]||(a[1]=()=>t.useCoupon(m.code))},{default:u(({errors:s})=>[d(v,{name:"優惠券",type:"text",class:L(["form-control",{"is-invalid":s.優惠券}]),placeholder:"輸入優惠碼",modelValue:m.code,"onUpdate:modelValue":a[0]||(a[0]=w=>m.code=w),rules:"required"},null,8,["class","modelValue"]),e("button",{type:"submit",class:"btn btn-success",disabled:t.isLoading}," 套用優惠券 ",8,ne),d(k,{name:"優惠券",class:"invalid-feedback"})]),_:1})]),e("div",ie,[e("div",de,[e("button",{type:"button",class:"btn btn-outline-danger",disabled:t.isLoading,onClick:a[2]||(a[2]=()=>t.removeAllCart())},[t.isLoading?(o(),n("span",le)):c("",!0),b(" 清除購物車 ")],8,ae)])])])]),e("div",re,[e("div",ce,[me,e("div",ue,[pe,e("div",be,[(o(!0),n(p,null,h(t.carts,s=>(o(),n("p",{class:"text-end border-bottom pb-3",key:s.id},i(s.product.title)+" x "+i(s.qty),1))),128))])]),e("div",_e,[he,e("div",ge,[t.message?(o(),n("small",ye," NT$ "+i(t.thousands(Math.round(t.total))),1)):c("",!0),e("p",fe,"NT$ "+i(t.thousands(Math.round(t.final_total))),1)])])]),d(_,{to:`cart/${t.carts[0].id}`,class:"btn btn-dark btn-lg rounded-0 w-100"},{default:u(()=>[b("結帳 ")]),_:1},8,["to"])])])])):(o(),n("div",I,[T,e("div",null,[d(_,{class:"btn btn-primary d-inline-block",to:"/products"},{default:u(()=>[b("馬上去選購")]),_:1})])]))],64)}const Ne=x(S,[["render",ve],["__scopeId","data-v-3c203ee7"]]);export{Ne as default};
